<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeLink - Complete Blood Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #e74c3c;
            --primary-dark: #c0392b;
            --secondary: #3498db;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --dark: #2c3e50;
            --darker: #1a252f;
            --light: #ecf0f1;
            --card-bg: #34495e;
            --border: #46627f;
            --text: #ecf0f1;
            --text-secondary: #bdc3c7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: var(--dark);
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        .logo i {
            color: var(--primary);
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 1.8rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-type-selector {
            display: flex;
            gap: 10px;
        }

        .user-type-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: var(--card-bg);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
        }

        .user-type-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Main Layout */
        .main-content {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 0;
            min-height: calc(100vh - 80px);
        }

        /* Sidebar */
        .sidebar {
            background: var(--card-bg);
            padding: 25px 20px;
            border-right: 1px solid var(--border);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: rgba(231, 76, 60, 0.1);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(231, 76, 60, 0.2);
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .menu {
            list-style: none;
        }

        .menu-item {
            margin-bottom: 10px;
        }

        .menu-item a {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 20px;
            color: var(--text);
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s;
        }

        .menu-item a:hover, .menu-item a.active {
            background: rgba(231, 76, 60, 0.1);
            color: var(--primary);
        }

        /* Content Area */
        .content {
            padding: 30px;
            overflow-y: auto;
            background: rgba(44, 62, 80, 0.3);
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .page-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .page-title i {
            color: var(--primary);
            font-size: 1.8rem;
        }

        .page-title h2 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text);
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            background: var(--darker);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            color: var(--text);
            transition: border 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        .form-row {
            display: flex;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--darker);
            font-weight: 600;
            color: var(--text);
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge-primary {
            background: rgba(231, 76, 60, 0.2);
            color: var(--primary);
        }

        .badge-success {
            background: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(243, 156, 18, 0.2);
            color: var(--warning);
        }

        .badge-danger {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        /* Blood Type Selector */
        .blood-type-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .blood-type-option {
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            background: var(--darker);
        }

        .blood-type-option.selected {
            border-color: var(--primary);
            background: rgba(231, 76, 60, 0.1);
            color: var(--primary);
        }

        /* Credit Points */
        .credit-points {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border-left: 4px solid var(--primary);
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            text-align: center;
            padding: 30px 20px;
        }

        .stat-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Health Report */
        .health-report {
            background: rgba(52, 73, 94, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .health-metric {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .health-metric:last-child {
            border-bottom: none;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                    <h1>LifeLink</h1>
                </div>
                <div class="user-type-selector">
                    <button class="user-type-btn active" data-user-type="donor">Donor</button>
                    <button class="user-type-btn" data-user-type="recipient">Recipient</button>
                    <button class="user-type-btn" data-user-type="bloodbank">Blood Bank</button>
                    <button class="user-type-btn" data-user-type="admin">Admin</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="user-profile">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <h3 id="userName">Guest User</h3>
                        <p id="userRole">Select User Type</p>
                    </div>
                </div>
                
                <ul class="menu">
                    <li class="menu-item">
                        <a href="#" class="active" data-page="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" data-page="registration">
                            <i class="fas fa-user-plus"></i>
                            <span>Registration</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" data-page="matching">
                            <i class="fas fa-code-branch"></i>
                            <span>Blood Matching</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" data-page="requests">
                            <i class="fas fa-ambulance"></i>
                            <span>Blood Requests</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" data-page="credits">
                            <i class="fas fa-star"></i>
                            <span>Credit System</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" data-page="reports">
                            <i class="fas fa-file-medical"></i>
                            <span>Health Reports</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" data-page="inventory">
                            <i class="fas fa-boxes"></i>
                            <span>Inventory</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Content Area -->
            <div class="content">
                <!-- Dashboard -->
                <div class="page-section active" id="dashboard">
                    <div class="page-title">
                        <i class="fas fa-tachometer-alt"></i>
                        <h2>Dashboard Overview</h2>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="card stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value">24,587</div>
                            <div class="stat-label">Registered Donors</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-hand-holding-heart"></i>
                            </div>
                            <div class="stat-value">18,234</div>
                            <div class="stat-label">Successful Donations</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-hospital"></i>
                            </div>
                            <div class="stat-value">256</div>
                            <div class="stat-label">Partner Hospitals</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div class="stat-value">38,472</div>
                            <div class="stat-label">Lives Saved</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Quick Actions</h3>
                        </div>
                        <div class="form-row">
                            <button class="btn" onclick="showPage('registration')">
                                <i class="fas fa-user-plus"></i> Register User
                            </button>
                            <button class="btn" onclick="showPage('requests')">
                                <i class="fas fa-ambulance"></i> Request Blood
                            </button>
                            <button class="btn" onclick="showPage('matching')">
                                <i class="fas fa-code-branch"></i> Match Blood
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Registration -->
                <div class="page-section" id="registration">
                    <div class="page-title">
                        <i class="fas fa-user-plus"></i>
                        <h2>User Registration</h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="registrationTitle">Donor Registration</h3>
                        </div>
                        
                        <!-- Donor Registration Form -->
                        <form id="donorForm" class="registration-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="donorName">Full Name</label>
                                    <input type="text" id="donorName" class="form-control" placeholder="Enter full name" required>
                                </div>
                                <div class="form-group">
                                    <label for="donorAge">Age</label>
                                    <input type="number" id="donorAge" class="form-control" placeholder="Enter age" min="18" max="65" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="donorEmail">Email Address</label>
                                    <input type="email" id="donorEmail" class="form-control" placeholder="Enter email address" required>
                                </div>
                                <div class="form-group">
                                    <label for="donorPhone">Phone Number</label>
                                    <input type="tel" id="donorPhone" class="form-control" placeholder="Enter phone number" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Blood Type</label>
                                <div class="blood-type-selector">
                                    <div class="blood-type-option" data-type="A+">A+</div>
                                    <div class="blood-type-option" data-type="A-">A-</div>
                                    <div class="blood-type-option" data-type="B+">B+</div>
                                    <div class="blood-type-option" data-type="B-">B-</div>
                                    <div class="blood-type-option" data-type="AB+">AB+</div>
                                    <div class="blood-type-option" data-type="AB-">AB-</div>
                                    <div class="blood-type-option" data-type="O+">O+</div>
                                    <div class="blood-type-option" data-type="O-">O-</div>
                                </div>
                                <input type="hidden" id="donorBloodType" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="donorHealth">Health Conditions (if any)</label>
                                <textarea id="donorHealth" class="form-control" rows="3" placeholder="List any health conditions or medications"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-block">
                                <i class="fas fa-user-plus"></i> Register as Donor
                            </button>
                        </form>
                        
                        <!-- Recipient Registration Form -->
                        <form id="recipientForm" class="registration-form" style="display: none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="recipientName">Full Name</label>
                                    <input type="text" id="recipientName" class="form-control" placeholder="Enter full name" required>
                                </div>
                                <div class="form-group">
                                    <label for="recipientAge">Age</label>
                                    <input type="number" id="recipientAge" class="form-control" placeholder="Enter age" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="hospitalName">Hospital Name</label>
                                    <input type="text" id="hospitalName" class="form-control" placeholder="Enter hospital name" required>
                                </div>
                                <div class="form-group">
                                    <label for="patientCondition">Patient Condition</label>
                                    <input type="text" id="patientCondition" class="form-control" placeholder="Enter patient condition" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Required Blood Type</label>
                                <div class="blood-type-selector">
                                    <div class="blood-type-option" data-type="A+">A+</div>
                                    <div class="blood-type-option" data-type="A-">A-</div>
                                    <div class="blood-type-option" data-type="B+">B+</div>
                                    <div class="blood-type-option" data-type="B-">B-</div>
                                    <div class="blood-type-option" data-type="AB+">AB+</div>
                                    <div class="blood-type-option" data-type="AB-">AB-</div>
                                    <div class="blood-type-option" data-type="O+">O+</div>
                                    <div class="blood-type-option" data-type="O-">O-</div>
                                </div>
                                <input type="hidden" id="recipientBloodType" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="urgencyLevel">Urgency Level</label>
                                <select id="urgencyLevel" class="form-control" required>
                                    <option value="">Select urgency level</option>
                                    <option value="low">Low (Scheduled surgery)</option>
                                    <option value="medium">Medium (Within 1 week)</option>
                                    <option value="high">High (Within 48 hours)</option>
                                    <option value="critical">Critical (Emergency)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="requiredUnits">Required Units</label>
                                <input type="number" id="requiredUnits" class="form-control" placeholder="Enter number of units required" min="1" required>
                            </div>
                            
                            <button type="submit" class="btn btn-block">
                                <i class="fas fa-hand-holding-medical"></i> Register as Recipient
                            </button>
                        </form>
                        
                        <!-- Blood Bank Registration Form -->
                        <form id="bloodbankForm" class="registration-form" style="display: none;">
                            <div class="form-group">
                                <label for="bankName">Blood Bank Name</label>
                                <input type="text" id="bankName" class="form-control" placeholder="Enter blood bank name" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bankLicense">License Number</label>
                                    <input type="text" id="bankLicense" class="form-control" placeholder="Enter license number" required>
                                </div>
                                <div class="form-group">
                                    <label for="bankEmail">Email Address</label>
                                    <input type="email" id="bankEmail" class="form-control" placeholder="Enter email address" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bankPhone">Phone Number</label>
                                    <input type="tel" id="bankPhone" class="form-control" placeholder="Enter phone number" required>
                                </div>
                                <div class="form-group">
                                    <label for="bankCapacity">Storage Capacity (units)</label>
                                    <input type="number" id="bankCapacity" class="form-control" placeholder="Enter storage capacity" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="bankAddress">Full Address</label>
                                <textarea id="bankAddress" class="form-control" rows="3" placeholder="Enter full address" required></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-block">
                                <i class="fas fa-hospital"></i> Register Blood Bank
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Blood Matching -->
                <div class="page-section" id="matching">
                    <div class="page-title">
                        <i class="fas fa-code-branch"></i>
                        <h2>Smart Blood Matching</h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Automated Blood Matching</h3>
                        </div>
                        
                        <div class="form-group">
                            <label for="patientBloodType">Patient Blood Type</label>
                            <select id="patientBloodType" class="form-control" required>
                                <option value="">Select blood type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="requiredType">Required Blood Product</label>
                            <select id="requiredType" class="form-control" required>
                                <option value="">Select blood product</option>
                                <option value="whole-blood">Whole Blood</option>
                                <option value="red-cells">Red Cells</option>
                                <option value="platelets">Platelets</option>
                                <option value="plasma">Plasma</option>
                            </select>
                        </div>
                        
                        <button id="matchBlood" class="btn btn-block">
                            <i class="fas fa-play"></i> Start Matching Process
                        </button>
                        
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress" id="matchingProgressBar"></div>
                            </div>
                            <div id="matchingStatus" style="text-align: center; margin-top: 10px; color: var(--text-secondary);">Ready to start matching</div>
                        </div>
                        
                        <div id="matchingResults" style="display: none;">
                            <h4 style="margin: 25px 0 15px;">Matching Results</h4>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Donor Name</th>
                                            <th>Blood Type</th>
                                            <th>Location</th>
                                            <th>Last Donation</th>
                                            <th>Status</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="matchingResultsBody">
                                        <!-- Results will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                            <button class="btn btn-block" onclick="sendNotifications()" style="margin-top: 20px;">
                                <i class="fas fa-bell"></i> Send Notifications to Matched Donors
                            </button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Blood Type Compatibility</h3>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Blood Type</th>
                                        <th>Can Donate To</th>
                                        <th>Can Receive From</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>A+</strong></td>
                                        <td>A+, AB+</td>
                                        <td>A+, A-, O+, O-</td>
                                    </tr>
                                    <tr>
                                        <td><strong>O+</strong></td>
                                        <td>O+, A+, B+, AB+</td>
                                        <td>O+, O-</td>
                                    </tr>
                                    <tr>
                                        <td><strong>B+</strong></td>
                                        <td>B+, AB+</td>
                                        <td>B+, B-, O+, O-</td>
                                    </tr>
                                    <tr>
                                        <td><strong>AB+</strong></td>
                                        <td>AB+</td>
                                        <td>Everyone</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Blood Requests -->
                <div class="page-section" id="requests">
                    <div class="page-title">
                        <i class="fas fa-ambulance"></i>
                        <h2>Blood Requests</h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">New Blood Request</h3>
                        </div>
                        <form id="bloodRequestForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="hospitalName">Hospital Name</label>
                                    <input type="text" id="hospitalName" class="form-control" placeholder="Enter hospital name" required>
                                </div>
                                <div class="form-group">
                                    <label for="requestorName">Requestor Name</label>
                                    <input type="text" id="requestorName" class="form-control" placeholder="Enter requestor name" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="requestorPhone">Contact Phone</label>
                                    <input type="tel" id="requestorPhone" class="form-control" placeholder="Enter contact phone" required>
                                </div>
                                <div class="form-group">
                                    <label for="patientCondition">Patient Condition</label>
                                    <input type="text" id="patientCondition" class="form-control" placeholder="Enter patient condition" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Required Blood Type</label>
                                <div class="blood-type-selector">
                                    <div class="blood-type-option" data-type="A+">A+</div>
                                    <div class="blood-type-option" data-type="A-">A-</div>
                                    <div class="blood-type-option" data-type="B+">B+</div>
                                    <div class="blood-type-option" data-type="B-">B-</div>
                                    <div class="blood-type-option" data-type="AB+">AB+</div>
                                    <div class="blood-type-option" data-type="AB-">AB-</div>
                                    <div class="blood-type-option" data-type="O+">O+</div>
                                    <div class="blood-type-option" data-type="O-">O-</div>
                                </div>
                                <input type="hidden" id="requestBloodType" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="unitsNeeded">Units Needed</label>
                                    <input type="number" id="unitsNeeded" class="form-control" placeholder="Enter units needed" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="urgencyLevel">Urgency Level</label>
                                    <select id="urgencyLevel" class="form-control" required>
                                        <option value="">Select urgency level</option>
                                        <option value="low">Low (Scheduled surgery)</option>
                                        <option value="medium">Medium (Within 1 week)</option>
                                        <option value="high">High (Within 48 hours)</option>
                                        <option value="critical">Critical (Emergency)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-block">
                                <i class="fas fa-paper-plane"></i> Submit Blood Request
                            </button>
                        </form>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Active Blood Requests</h3>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Hospital</th>
                                        <th>Blood Type</th>
                                        <th>Units</th>
                                        <th>Urgency</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="activeRequestsTable">
                                    <tr>
                                        <td>AIIMS Delhi</td>
                                        <td>O+</td>
                                        <td>4</td>
                                        <td><span class="badge badge-danger">Critical</span></td>
                                        <td><span class="badge badge-warning">Pending</span></td>
                                        <td><button class="btn btn-success" onclick="startMatching('AIIMS Delhi', 'O+', 4)">Match</button></td>
                                    </tr>
                                    <tr>
                                        <td>Apollo Hospital Chennai</td>
                                        <td>A+</td>
                                        <td>2</td>
                                        <td><span class="badge badge-warning">High</span></td>
                                        <td><span class="badge badge-success">Matched</span></td>
                                        <td><button class="btn btn-outline">View</button></td>
                                    </tr>
                                    <tr>
                                        <td>KEM Hospital Mumbai</td>
                                        <td>B-</td>
                                        <td>1</td>
                                        <td><span class="badge badge-primary">Medium</span></td>
                                        <td><span class="badge badge-warning">Processing</span></td>
                                        <td><button class="btn btn-outline">View</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Credit System -->
                <div class="page-section" id="credits">
                    <div class="page-title">
                        <i class="fas fa-star"></i>
                        <h2>Credit Points System</h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Donor Credit Leaderboard</h3>
                            <div class="credit-points">
                                <i class="fas fa-star"></i>
                                <span>Your Points: 125</span>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Donor Name</th>
                                        <th>Blood Type</th>
                                        <th>Donations</th>
                                        <th>Credit Points</th>
                                        <th>Badge</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>Rajesh Kumar</td>
                                        <td>O+</td>
                                        <td>24</td>
                                        <td>480</td>
                                        <td><span class="badge badge-success">Platinum</span></td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Priya Sharma</td>
                                        <td>A-</td>
                                        <td>18</td>
                                        <td>360</td>
                                        <td><span class="badge badge-primary">Gold</span></td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Vikram Singh</td>
                                        <td>B+</td>
                                        <td>15</td>
                                        <td>300</td>
                                        <td><span class="badge badge-warning">Silver</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Credit System Information</h3>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <h4>How to Earn Points</h4>
                                <ul style="margin-left: 20px; margin-top: 10px;">
                                    <li>Regular donation: 20 points</li>
                                    <li>Emergency response: 30 points</li>
                                    <li>Rare blood type donation: 25 points</li>
                                    <li>Refer a new donor: 15 points</li>
                                </ul>
                            </div>
                            <div class="form-group">
                                <h4>Rewards</h4>
                                <ul style="margin-left: 20px; margin-top: 10px;">
                                    <li>100 points: Bronze badge</li>
                                    <li>250 points: Silver badge</li>
                                    <li>500 points: Gold badge</li>
                                    <li>1000 points: Platinum badge</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Health Reports -->
                <div class="page-section" id="reports">
                    <div class="page-title">
                        <i class="fas fa-file-medical"></i>
                        <h2>Health Reports</h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Donor Health Dashboard</h3>
                        </div>
                        <div class="health-report">
                            <div class="health-metric">
                                <span>Last Donation Date</span>
                                <span>March 15, 2023</span>
                            </div>
                            <div class="health-metric">
                                <span>Total Donations</span>
                                <span>8</span>
                            </div>
                            <div class="health-metric">
                                <span>Hemoglobin Level</span>
                                <span>14.2 g/dL</span>
                            </div>
                            <div class="health-metric">
                                <span>Blood Pressure</span>
                                <span>120/80 mmHg</span>
                            </div>
                            <div class="health-metric">
                                <span>Next Eligible Donation</span>
                                <span>May 10, 2023</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Health History</h3>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Blood Type Tested</th>
                                        <th>Hemoglobin</th>
                                        <th>Blood Pressure</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>March 15, 2023</td>
                                        <td>O+</td>
                                        <td>14.2 g/dL</td>
                                        <td>120/80 mmHg</td>
                                        <td><span class="badge badge-success">Approved</span></td>
                                    </tr>
                                    <tr>
                                        <td>January 10, 2023</td>
                                        <td>O+</td>
                                        <td>13.8 g/dL</td>
                                        <td>118/78 mmHg</td>
                                        <td><span class="badge badge-success">Approved</span></td>
                                    </tr>
                                    <tr>
                                        <td>November 5, 2022</td>
                                        <td>O+</td>
                                        <td>14.5 g/dL</td>
                                        <td>122/82 mmHg</td>
                                        <td><span class="badge badge-success">Approved</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Inventory -->
                <div class="page-section" id="inventory">
                    <div class="page-title">
                        <i class="fas fa-boxes"></i>
                        <h2>Blood Inventory</h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Current Blood Stock</h3>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Blood Type</th>
                                        <th>Whole Blood (Units)</th>
                                        <th>Red Cells (Units)</th>
                                        <th>Platelets (Units)</th>
                                        <th>Plasma (Units)</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>A+</td>
                                        <td>42</td>
                                        <td>35</td>
                                        <td>18</td>
                                        <td>25</td>
                                        <td><span class="badge badge-success">Adequate</span></td>
                                    </tr>
                                    <tr>
                                        <td>O+</td>
                                        <td>38</td>
                                        <td>30</td>
                                        <td>15</td>
                                        <td>22</td>
                                        <td><span class="badge badge-success">Adequate</span></td>
                                    </tr>
                                    <tr>
                                        <td>B+</td>
                                        <td>25</td>
                                        <td>18</td>
                                        <td>10</td>
                                        <td>15</td>
                                        <td><span class="badge badge-warning">Low</span></td>
                                    </tr>
                                    <tr>
                                        <td>AB+</td>
                                        <td>15</td>
                                        <td>12</td>
                                        <td>8</td>
                                        <td>10</td>
                                        <td><span class="badge badge-warning">Low</span></td>
                                    </tr>
                                    <tr>
                                        <td>O-</td>
                                        <td>12</td>
                                        <td>8</td>
                                        <td>5</td>
                                        <td>8</td>
                                        <td><span class="badge badge-danger">Critical</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Inventory Management</h3>
                        </div>
                        <div class="form-row">
                            <button class="btn" onclick="updateInventory()">
                                <i class="fas fa-sync-alt"></i> Update Inventory
                            </button>
                            <button class="btn" onclick="generateInventoryReport()">
                                <i class="fas fa-file-pdf"></i> Generate Report
                            </button>
                            <button class="btn" onclick="requestRestock()">
                                <i class="fas fa-truck"></i> Request Restock
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-bell"></i>
        <div id="notificationMessage">Notification message</div>
    </div>

    <script>
        // Global data storage
        const appData = {
            currentUserType: 'donor',
            donors: [],
            recipients: [],
            bloodBanks: [],
            bloodRequests: [],
            inventory: {},
            creditPoints: 125
        };

        // DOM Ready
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // Initialize the application
        function initializeApp() {
            // Set up event listeners
            setupUserTypeSelector();
            setupNavigation();
            setupBloodTypeSelectors();
            setupFormSubmissions();
            
            // Initialize with sample data
            initializeSampleData();
        }

        // Set up user type selector
        function setupUserTypeSelector() {
            const userTypeBtns = document.querySelectorAll('.user-type-btn');
            
            userTypeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Update active button
                    userTypeBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update user type
                    const userType = this.getAttribute('data-user-type');
                    appData.currentUserType = userType;
                    
                    // Update UI based on user type
                    updateUserInterface(userType);
                });
            });
        }

        // Update UI based on user type
        function updateUserInterface(userType) {
            const userName = document.getElementById('userName');
            const userRole = document.getElementById('userRole');
            const registrationTitle = document.getElementById('registrationTitle');
            
            // Update user profile with Indian names
            switch(userType) {
                case 'donor':
                    userName.textContent = 'Rajesh Kumar';
                    userRole.textContent = 'Blood Donor';
                    registrationTitle.textContent = 'Donor Registration';
                    break;
                case 'recipient':
                    userName.textContent = 'Priya Sharma';
                    userRole.textContent = 'Blood Recipient';
                    registrationTitle.textContent = 'Recipient Registration';
                    break;
                case 'bloodbank':
                    userName.textContent = 'Delhi Blood Bank';
                    userRole.textContent = 'Blood Bank Administrator';
                    registrationTitle.textContent = 'Blood Bank Registration';
                    break;
                case 'admin':
                    userName.textContent = 'Admin User';
                    userRole.textContent = 'System Administrator';
                    registrationTitle.textContent = 'User Registration';
                    break;
            }
            
            // Update registration form visibility
            updateRegistrationForm(userType);
        }

        // Update registration form based on user type
        function updateRegistrationForm(userType) {
            // Hide all forms
            document.getElementById('donorForm').style.display = 'none';
            document.getElementById('recipientForm').style.display = 'none';
            document.getElementById('bloodbankForm').style.display = 'none';
            
            // Show appropriate form
            switch(userType) {
                case 'donor':
                    document.getElementById('donorForm').style.display = 'block';
                    break;
                case 'recipient':
                    document.getElementById('recipientForm').style.display = 'block';
                    break;
                case 'bloodbank':
                    document.getElementById('bloodbankForm').style.display = 'block';
                    break;
                case 'admin':
                    // Admin can see all forms or a special admin form
                    document.getElementById('donorForm').style.display = 'block';
                    break;
            }
        }

        // Set up navigation
        function setupNavigation() {
            const menuLinks = document.querySelectorAll('.menu-item a');
            
            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active menu item
                    menuLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show the selected page
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });
        }

        // Show a specific page
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-section');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show the selected page
            document.getElementById(pageId).classList.add('active');
        }

        // Set up blood type selectors
        function setupBloodTypeSelectors() {
            const bloodTypeOptions = document.querySelectorAll('.blood-type-option');
            
            bloodTypeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Get the parent blood type selector
                    const selector = this.closest('.blood-type-selector');
                    
                    // Remove selected class from all options in this selector
                    const optionsInSelector = selector.querySelectorAll('.blood-type-option');
                    optionsInSelector.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Update the hidden input
                    const hiddenInput = selector.nextElementSibling;
                    if (hiddenInput && hiddenInput.type === 'hidden') {
                        hiddenInput.value = this.getAttribute('data-type');
                    }
                });
            });
        }

        // Set up form submissions
        function setupFormSubmissions() {
            // Donor registration form
            document.getElementById('donorForm').addEventListener('submit', function(e) {
                e.preventDefault();
                registerDonor();
            });
            
            // Recipient registration form
            document.getElementById('recipientForm').addEventListener('submit', function(e) {
                e.preventDefault();
                registerRecipient();
            });
            
            // Blood bank registration form
            document.getElementById('bloodbankForm').addEventListener('submit', function(e) {
                e.preventDefault();
                registerBloodBank();
            });
            
            // Blood request form
            document.getElementById('bloodRequestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitBloodRequest();
            });
            
            // Blood matching button
            document.getElementById('matchBlood').addEventListener('click', function() {
                startBloodMatching();
            });
        }

        // Initialize sample data with Indian user data
        function initializeSampleData() {
            // Sample donors with Indian names
            appData.donors = [
                { id: 1, name: 'Rajesh Kumar', bloodType: 'O+', age: 32, lastDonation: '2023-03-15', location: 'Delhi', status: 'Available' },
                { id: 2, name: 'Priya Sharma', bloodType: 'A-', age: 28, lastDonation: '2023-02-20', location: 'Mumbai', status: 'Available' },
                { id: 3, name: 'Vikram Singh', bloodType: 'B+', age: 45, lastDonation: '2023-01-10', location: 'Bangalore', status: 'Available' },
                { id: 4, name: 'Anjali Patel', bloodType: 'O-', age: 29, lastDonation: '2023-03-01', location: 'Chennai', status: 'Available' },
                { id: 5, name: 'Rahul Verma', bloodType: 'AB+', age: 35, lastDonation: '2023-02-15', location: 'Kolkata', status: 'Available' },
                { id: 6, name: 'Sneha Reddy', bloodType: 'A+', age: 26, lastDonation: '2023-03-10', location: 'Hyderabad', status: 'Available' }
            ];
            
            // Sample blood requests with Indian hospitals
            appData.bloodRequests = [
                { id: 1, hospital: 'AIIMS Delhi', bloodType: 'O+', units: 4, urgency: 'critical', status: 'pending' },
                { id: 2, hospital: 'Apollo Hospital Chennai', bloodType: 'A+', units: 2, urgency: 'high', status: 'matched' },
                { id: 3, hospital: 'KEM Hospital Mumbai', bloodType: 'B-', units: 1, urgency: 'medium', status: 'processing' }
            ];
        }

        // Register a new donor
        function registerDonor() {
            const name = document.getElementById('donorName').value;
            const age = document.getElementById('donorAge').value;
            const email = document.getElementById('donorEmail').value;
            const phone = document.getElementById('donorPhone').value;
            const bloodType = document.getElementById('donorBloodType').value;
            const healthInfo = document.getElementById('donorHealth').value;
            
            // Create new donor object
            const newDonor = {
                id: appData.donors.length + 1,
                name: name,
                age: age,
                email: email,
                phone: phone,
                bloodType: bloodType,
                healthInfo: healthInfo,
                lastDonation: 'Never',
                status: 'Available'
            };
            
            // Add to donors array
            appData.donors.push(newDonor);
            
            // Show success notification
            showNotification(`Donor ${name} registered successfully!`);
            
            // Reset form
            document.getElementById('donorForm').reset();
            document.querySelectorAll('.blood-type-option').forEach(opt => opt.classList.remove('selected'));
            
            // Update dashboard stats
            updateDashboardStats();
        }

        // Register a new recipient
        function registerRecipient() {
            const name = document.getElementById('recipientName').value;
            const age = document.getElementById('recipientAge').value;
            const hospital = document.getElementById('hospitalName').value;
            const condition = document.getElementById('patientCondition').value;
            const bloodType = document.getElementById('recipientBloodType').value;
            const urgency = document.getElementById('urgencyLevel').value;
            const units = document.getElementById('requiredUnits').value;
            
            // Create new recipient object
            const newRecipient = {
                id: appData.recipients.length + 1,
                name: name,
                age: age,
                hospital: hospital,
                condition: condition,
                bloodType: bloodType,
                urgency: urgency,
                units: units,
                status: 'Pending'
            };
            
            // Add to recipients array
            appData.recipients.push(newRecipient);
            
            // Show success notification
            showNotification(`Recipient ${name} registered successfully!`);
            
            // Reset form
            document.getElementById('recipientForm').reset();
            document.querySelectorAll('.blood-type-option').forEach(opt => opt.classList.remove('selected'));
        }

        // Register a new blood bank
        function registerBloodBank() {
            const name = document.getElementById('bankName').value;
            const license = document.getElementById('bankLicense').value;
            const email = document.getElementById('bankEmail').value;
            const phone = document.getElementById('bankPhone').value;
            const capacity = document.getElementById('bankCapacity').value;
            const address = document.getElementById('bankAddress').value;
            
            // Create new blood bank object
            const newBloodBank = {
                id: appData.bloodBanks.length + 1,
                name: name,
                license: license,
                email: email,
                phone: phone,
                capacity: capacity,
                address: address,
                status: 'Active'
            };
            
            // Add to blood banks array
            appData.bloodBanks.push(newBloodBank);
            
            // Show success notification
            showNotification(`Blood Bank ${name} registered successfully!`);
            
            // Reset form
            document.getElementById('bloodbankForm').reset();
        }

        // Submit a blood request
        function submitBloodRequest() {
            const hospital = document.getElementById('hospitalName').value;
            const requestor = document.getElementById('requestorName').value;
            const phone = document.getElementById('requestorPhone').value;
            const condition = document.getElementById('patientCondition').value;
            const bloodType = document.getElementById('requestBloodType').value;
            const units = document.getElementById('unitsNeeded').value;
            const urgency = document.getElementById('urgencyLevel').value;
            
            // Create new blood request
            const newRequest = {
                id: appData.bloodRequests.length + 1,
                hospital: hospital,
                requestor: requestor,
                phone: phone,
                condition: condition,
                bloodType: bloodType,
                units: units,
                urgency: urgency,
                status: 'pending',
                date: new Date().toLocaleDateString()
            };
            
            // Add to blood requests array
            appData.bloodRequests.push(newRequest);
            
            // Update the active requests table
            updateActiveRequestsTable();
            
            // Show success notification
            showNotification(`Blood request submitted successfully!`);
            
            // Reset form
            document.getElementById('bloodRequestForm').reset();
            document.querySelectorAll('.blood-type-option').forEach(opt => opt.classList.remove('selected'));
        }

        // Update the active requests table
        function updateActiveRequestsTable() {
            const tableBody = document.getElementById('activeRequestsTable');
            tableBody.innerHTML = '';
            
            appData.bloodRequests.forEach(request => {
                const row = document.createElement('tr');
                
                // Determine badge class based on urgency
                let urgencyBadge = '';
                switch(request.urgency) {
                    case 'critical':
                        urgencyBadge = 'badge-danger';
                        break;
                    case 'high':
                        urgencyBadge = 'badge-warning';
                        break;
                    case 'medium':
                        urgencyBadge = 'badge-primary';
                        break;
                    case 'low':
                        urgencyBadge = 'badge-success';
                        break;
                }
                
                // Determine status badge
                let statusBadge = '';
                switch(request.status) {
                    case 'pending':
                        statusBadge = 'badge-warning';
                        break;
                    case 'matched':
                        statusBadge = 'badge-success';
                        break;
                    case 'processing':
                        statusBadge = 'badge-primary';
                        break;
                }
                
                row.innerHTML = `
                    <td>${request.hospital}</td>
                    <td>${request.bloodType}</td>
                    <td>${request.units}</td>
                    <td><span class="badge ${urgencyBadge}">${request.urgency.charAt(0).toUpperCase() + request.urgency.slice(1)}</span></td>
                    <td><span class="badge ${statusBadge}">${request.status.charAt(0).toUpperCase() + request.status.slice(1)}</span></td>
                    <td><button class="btn btn-success" onclick="startMatching('${request.hospital}', '${request.bloodType}', ${request.units})">Match</button></td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Start blood matching process
        function startBloodMatching() {
            const patientBloodType = document.getElementById('patientBloodType').value;
            const requiredType = document.getElementById('requiredType').value;
            
            if (!patientBloodType || !requiredType) {
                showNotification('Please select both blood type and required product', 'error');
                return;
            }
            
            // Update matching status
            const statusElement = document.getElementById('matchingStatus');
            const progressBar = document.getElementById('matchingProgressBar');
            
            statusElement.textContent = 'Searching for compatible donors...';
            progressBar.style.width = '25%';
            
            // Simulate matching process
            setTimeout(() => {
                progressBar.style.width = '50%';
                statusElement.textContent = 'Checking donor availability...';
                
                setTimeout(() => {
                    progressBar.style.width = '75%';
                    statusElement.textContent = 'Calculating best matches...';
                    
                    setTimeout(() => {
                        progressBar.style.width = '100%';
                        statusElement.textContent = 'Matching complete!';
                        
                        // Display results
                        displayMatchingResults(patientBloodType);
                    }, 1000);
                }, 1000);
            }, 1000);
        }

        // Display matching results
        function displayMatchingResults(patientBloodType) {
            const resultsContainer = document.getElementById('matchingResults');
            const resultsBody = document.getElementById('matchingResultsBody');
            
            // Clear previous results
            resultsBody.innerHTML = '';
            
            // Find compatible donors based on blood type
            const compatibleDonors = findCompatibleDonors(patientBloodType);
            
            if (compatibleDonors.length === 0) {
                resultsBody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No compatible donors found</td></tr>';
            } else {
                compatibleDonors.forEach(donor => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${donor.name}</td>
                        <td>${donor.bloodType}</td>
                        <td>${donor.location}</td>
                        <td>${donor.lastDonation}</td>
                        <td><span class="badge badge-success">${donor.status}</span></td>
                        <td><button class="btn" onclick="contactDonor(${donor.id})">Contact</button></td>
                    `;
                    resultsBody.appendChild(row);
                });
            }
            
            // Show results container
            resultsContainer.style.display = 'block';
        }

        // Find compatible donors based on blood type
        function findCompatibleDonors(patientBloodType) {
            // Simplified compatibility logic
            const compatibility = {
                'A+': ['A+', 'A-', 'O+', 'O-'],
                'A-': ['A-', 'O-'],
                'B+': ['B+', 'B-', 'O+', 'O-'],
                'B-': ['B-', 'O-'],
                'AB+': ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'],
                'AB-': ['A-', 'B-', 'AB-', 'O-'],
                'O+': ['O+', 'O-'],
                'O-': ['O-']
            };
            
            const compatibleTypes = compatibility[patientBloodType] || [];
            return appData.donors.filter(donor => compatibleTypes.includes(donor.bloodType));
        }

        // Start matching from requests table
        function startMatching(hospital, bloodType, units) {
            // Set the values in the matching form
            document.getElementById('patientBloodType').value = bloodType;
            
            // Show the matching page
            showPage('matching');
            
            // Start the matching process
            setTimeout(() => {
                startBloodMatching();
            }, 500);
        }

        // Contact a donor
        function contactDonor(donorId) {
            const donor = appData.donors.find(d => d.id === donorId);
            if (donor) {
                showNotification(`Contacting ${donor.name} at ${donor.phone}`, 'success');
            }
        }

        // Send notifications to matched donors
        function sendNotifications() {
            showNotification('Notifications sent to all matched donors!', 'success');
        }

        // Update dashboard stats
        function updateDashboardStats() {
            // In a real app, this would update with actual data
            // For now, we'll just simulate an update
            const donorCount = document.querySelector('.stat-card:nth-child(1) .stat-value');
            donorCount.textContent = (parseInt(donorCount.textContent.replace(/,/g, '')) + 1).toLocaleString();
        }

        // Update inventory
        function updateInventory() {
            showNotification('Inventory updated successfully!', 'success');
        }

        // Generate inventory report
        function generateInventoryReport() {
            showNotification('Inventory report generated!', 'success');
        }

        // Request restock
        function requestRestock() {
            showNotification('Restock request submitted!', 'success');
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const messageElement = document.getElementById('notificationMessage');
            
            // Set message and type
            messageElement.textContent = message;
            
            // Set color based on type
            if (type === 'error') {
                notification.style.borderLeftColor = 'var(--danger)';
            } else {
                notification.style.borderLeftColor = 'var(--success)';
            }
            
            // Show notification
            notification.classList.add('show');
            
            // Hide after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>